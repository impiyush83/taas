<html>
    <head>
        <link href="{{ url_for('static',filename='css/home_style.css')}}" type="text/css" rel="stylesheet"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="header_wrapper">
            <div id="header">
                <form method="post" id="login_user">
                    <li>Email<br><input type="text" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required></li>
                    <li>Password<br><input type="password" name="password" required></li>
                    <li><input type="submit" name="login" value="Log In"></li>
                </form>
            </div>
        </div>
        <div id="wrapper">
            <div id="div2" style="align-self: center ; margin: 100px 400px 400px 100px ; padding-left: 200px ">
                <h1>Create an account</h1>
                    <p>It's free and always will be.</p>
                    <form name="signup" method="post" id="signup_user">
                        <li>
                            <input name="email" type="text" placeholder="Email Address"
                                           pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required>
                        </li>
                        <li>
                          <input type="password" name="password" id="password" placeholder="Enter your password" required>
                        </li>
                       
                        
                        <li>
                           <input type="text" name="consumer_key" id="consumer_key" placeholder="Enter your consumer key" required>
                        </li>
                        <li>
                             <input  type="text" name="consumer_secret_key" id="consumer_secret_key" placeholder="Enter your consumer secret key" required>
                        </li>


                         <li>
                          <input  type="text" name="access_secret_token" id="access_secret_token" placeholder="Enter your access secret token" required>
                        </li>

                          <li>
                           <input  type="text" name="access_token" id="access_token" placeholder="Enter your access token" required>
                        </li>

                        <li id="terms">By clicking Create an account, you agree to our Terms and that
                            <br>you have read our Data Policy including our Cookie Use.</li>
                        <li>
                            <input  type="submit" value="Create an account" >
                        </li>
                    </form>
            </div>
        </div>
    </body>
</html>


<script>

     $(document).ready(function (e) {
            $('#signup_user').on('submit', (function (e) {
               e.preventDefault();
                var formData = new FormData(this);
                var object = {};
                formData.forEach(function(value, key){
                    object[key] = value;
                });
                $.ajax({
                    type: 'POST',
                    url: "/user/signup",
                    data : JSON.stringify(object),
                    datatype: 'json',
                    cache: false,
                    contentType: "application/json; charset=utf-8",
                    processData: false,
                    success: function (data) {
                        alert("Hurray !! Your have been successfully signed up !!");
                        location.reload();
                    },
                    error: function (data) {
                        alert("ERROR " + data.status + " " + data.statusText + " : "+data.responseJSON.message);
                        location.reload();
                    }
                });
            }));

             $('#login_user').on('submit', (function (e) {
               e.preventDefault();
                var formData = new FormData(this);
                var object = {};
                formData.forEach(function(value, key){
                    object[key] = value;
                });
                $.ajax({
                    type: 'POST',
                    url: "/user/login",
                    data : JSON.stringify(object),
                    datatype: 'json',
                    cache: false,
                    contentType: "application/json; charset=utf-8",
                    processData: false,
                    success: function (data) {
                        window.location.href='user/tweet'
                    },
                    error: function (data) {
                        alert("ERROR " + data.status + " " + data.statusText + " : "+data.responseJSON.message);
                        location.reload();
                    }
                });
            }));
        });


</script>